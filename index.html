<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="./assets/images/favicon.ico" type="image/x-icon">
  <title>華南銀行 - 國內信用狀系統</title>
  <link rel="stylesheet" href="./assets/MaterialDesign-Webfont/css/materialdesignicons.min.css" media="all" />
  <link rel="stylesheet" href="./assets/css/custom.css">
</head>

<body>
  <header class="navbar fixed-top flex-nowrap border-bottom p-0 shadow-sm">
    <div class="navbar-brand hnb__logo me-0 px-3">
      <img src="./assets/images/logo-hncb.png" alt="HNB logo" class="pe-2">
      <span class="align-text-top fs-4 fw-bold custom-element" style="color: #2a91bc;">國內信用狀系統</span>
    </div>
    <nav class="d-inline-flex align-items-center me-4">
      <span class="px-2 fw-bold">
        <span id="authTitle"></span>
        王建明 您好，歡迎使用本系統</span>
      <span class="px-2">|</span>
      <a id="todoList" class="hnb__link--tab mx-2" href="#" onclick="todoListHandler()">待辦事項</a>
      <a id="info" class="hnb__link--tab mx-2" href="#" onclick="infoListHandler()">訊息匣</a>
      <button id="logout" class="btn logout btn-sm ms-3 px-3" type="button">
        <span class="mdi mdi-logout"></span>
        登出
      </button>
    </nav>
  </header>
  <div class="container-fluid px-0">
    <!-- 左側選單-->
    <nav id="sidebarMenu" class="d-block sidebar collapse">
      <div class="position-sticky pb-5">
        <div class="accordion accordion-flush" id="accordionSideMenu">
          <!-- <div class="accordion-item">
            <h2 class="accordion-header" id="heading_App1">
              <button class="py-2 fs-1-5 fw-bold accordion-button hnb__menu--title rounded-0 collapsed" type="button"
                data-bs-toggle="collapse" data-bs-target="#App1" aria-expanded="true" aria-controls="App1">
                測試申請作業
              </button>
            </h2>
            <div id="App1" class="accordion-collapse collapse" aria-labelledby="heading_App1"
              data-bs-parent="#accordionSideMenu">
              <div class="accordion-body p-0">
                <div class="list-group list-group-flush" id="list-tab" role="tablist">
                  <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="LcApp"
                    href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-LcApp">開狀申請書</a>
                  <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="AmendApp"
                    href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-AmendApp">修改申請書</a>
                  <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="DraftApp"
                    href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-DraftApp">押匯申請</a>
                  <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="AmendAccept"
                    href="javascript:void(0)" role="tab" data-bs-toggle="list"
                    aria-controls="list-AmendAccept">修改信用狀接受註記</a>
                  <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="CancelApp"
                    href="javascript:void(0)" role="tab" data-bs-toggle="list"
                    aria-controls="list-CancelApp">註銷申請/切結書</a>
                  <div class="accordion" id="accordionExample">
                    <div class="accordion-item">
                      <h3 class="px-2 accordion-header" id="heading_App11">
                        <button
                          class="py-2 ps-3 fs-0-8-75 fw-bold accordion-button hnb__menu--title rounded-0 border-top collapsed"
                          type="button" data-bs-toggle="collapse" data-bs-target="#App11" aria-expanded="true"
                          aria-controls="App11">
                          測試作業
                        </button>
                      </h3>
                      <div id="App11" class="px-2 accordion-collapse collapse" aria-labelledby="heading_App11"
                        data-bs-parent="#App1">
                        <div class="accordion-body p-0">
                          <div class="list-group list-group-flush" id="list-tab" role="tablist">
                            <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="AmendApp"
                              href="javascript:void(0)" role="tab" data-bs-toggle="list"
                              aria-controls="list-AmendApp">修改申請書</a>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="accordion-item">
                      <h3 class="px-2 accordion-header" id="heading_App12">
                        <button
                          class="py-2 ps-3 fs-0-8-75 fw-bold accordion-button hnb__menu--title rounded-0 border-top collapsed"
                          type="button" data-bs-toggle="collapse" data-bs-target="#App12" aria-expanded="true"
                          aria-controls="App12">
                          測試作業
                        </button>
                      </h3>
                      <div id="App12" class="px-2 accordion-collapse collapse" aria-labelledby="heading_App12"
                        data-bs-parent="#App1">
                        <div class="accordion-body p-0">
                          <div class="list-group list-group-flush" id="list-tab" role="tablist">
                            <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="AmendAccept"
                              href="javascript:void(0)" role="tab" data-bs-toggle="list"
                              aria-controls="list-AmendAccept">修改信用狀接受註記</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div> -->



          <!-- <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="LcApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-LcApp">開狀申請書</a>
          <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="AmendApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-AmendApp">修改申請書</a>
          <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="DraftApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-DraftApp">押匯申請</a>
          <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="AmendAccept"
            href="javascript:void(0)" role="tab" data-bs-toggle="list"
            aria-controls="list-AmendAccept">修改信用狀接受註記</a>
          <a class="ps-4-5 list-group-item list-group-item-action hnb__menu--btn" id="CancelApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list"
            aria-controls="list-CancelApp">註銷申請/切結書</a> -->
          <!-- <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="AmendLcApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-AmendLcApp">當日沖正(EC)交易開狀申請書</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="CurrentAmendApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-CurrentAmendApp">當日沖正(EC)交易修改申請書</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="CurrentCancelApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-CurrentCancelApp">當日沖正註銷申請/切結書</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="CurrentAmendDraftApp"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-CurrentAmendDraftApp">當日沖正(EC)交易押匯申請作業</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="LcAdjustment"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-LcAdjustment">開狀申請當日調整帳務</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="AmendAdjustment"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-AmendAdjustment">修改申請當日調整帳務</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="CancelAdjustment"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-CancelAdjustment">註銷申請當日調整帳務</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="DraftAdjustment"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-DraftAdjustment">押匯申請當日調整帳務</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="SentTrfStatus"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-SentTrfStatus">傳送已轉帳狀態</a>
          <a class="ps-4 list-group-item list-group-item-action hnb__menu--btn" id="ExpiredLc"
            href="javascript:void(0)" role="tab" data-bs-toggle="list" aria-controls="list-ExpiredLc">CDS
            過期案件主動註銷</a> -->
        </div>
      </div>
    </nav>

    <!-- 主畫面，靜態頁面僅以 iframe 方式模擬 -->
    <main class="content__wrapper">
      <iframe id="main-content" title="Inline Frame" src="./pages/TodoList.html" style="width: 100%; height: 100%">
      </iframe>
    </main>
  </div>
  <footer class="navbar fixed-bottom flex-nowrap p-3">
  </footer>

  <!-- JS Plugin -->
  <script src="./assets/js/bootstrap.bundle.min.js"></script>
  <script src="./assets/js/jquery-3.7.1.js"></script>
  <script src="./assets/js/sideMenu.js"></script>
  <script>
    // 檢查 cookie 值是否存在，若無則回到 login 畫面
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
    }
    const userName = getCookie('username');
    let isAuth = false;
    // 檢查 URL 參數
    function checkAuth() {
      const urlParams = new URLSearchParams(window.location.search);
      const auth = urlParams.get('auth');
      isAuth = !!auth;
    }
    window.onload = () => {
      checkAuth()
      if (!userName || !isAuth) {
        window.location.href = './Login.html'
      }
    };

    // 登出 logout
    const logout = document.querySelector('#logout');
    logout.addEventListener('click', (e) => {
      e.preventDefault();
      document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      window.location.href = './Login.html'
    });

    // 待辦事項 todoList
    function todoListHandler() {
      clearAccordionAction();
      mainContent.src = './pages/TodoList.html';
    };

    // 訊息匣 infoList
    function infoListHandler() {
      clearAccordionAction();
      mainContent.src = './pages/Info.html';
    };

  </script>
</body>

</html>